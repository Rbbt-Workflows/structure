@import "layout/reveal"

$triglecolor: rgba(0,0,0,0.15)
$margin_table_actions: 7px
$padding_table: rhythm(0.5) 0.5em

$table_color: $subtle-background
$color_table_border: $subtle-border

=css-triangle($a,$b,$c)

=rbbt_table()
  +normal
  min-width: span(1 of 3)
  max-width: 100%

  caption
    text-align: left
    span
      +normal
      +subtle_color

  tfoot
    th
      //background-color: lighten($table_color, 5)

  padding: $padding_table
  border-collapse: collapse

  tbody, thead
    & > tr
      & > td, & > th
        margin: 0
        padding: rhythm(0.5)
        text-align: left
      & > th
        background-color: rgba(0,0,0,0.05)
        +noselect
 
  td, th
    vertical-align: center
    a
      white-space: nowrap

  &.wide
    td
      max-width: 200px
      overflow: hidden
      text-overflow: ellipsis
      @media #{$only-large}
        &:first-child
          max-width: 400px

  tfoot
    ul.table_actions li
      margin-left: $margin_table_actions
    ul.table_pagination, ul.table_actions
      +clean_list
      +flat_list
      +button_set
      display: flex
      li > .button, li.button, li
        min-width: 3em
        text-align: center
      float: left
      margin-right: 1em
      li.num.active, li.num.active > *
        text-decoration: underline !important

    ul.table_actions
      @media print
        &
          display: none

  &.sorted > thead > tr > th
    position: relative
    &, &:hover
      +down_cursor
      &.headerSortDown
        +up_cursor

    &.headerSortDown, &.headerSortUp
      +bold

    &.headerSortUp:after, &.headerSortDown:after
      content: " "
      float: right
      right: 0

    &.headerSortDown:after
      margin-top: 5px
      @include css-triangle(5px, $triglecolor, top)

    &.headerSortUp:after
      margin-bottom: 5px
      @include css-triangle(5px, $triglecolor, bottom)

=table_column_selector
  li
    @include grid-row()

    span
      @include ellipsis_text()
      @include grid-column(8)
    a
      @include grid-column(2, $last-column:false)

=responsive_table()
  caption
    display: block
  display: block
  position: relative
  width: 100%
  border-collapse: collapse
  border-spacing: 0
  & > thead, & > tbody
    & > tr
      & > th, & > td 
        margin: 0
        vertical-align: top
        height: 3em

      & > th
        display: block
        text-align: right

      & > td
        display: block
        text-align: left

  & > thead 
    display: block
    float: left
    max-width: 40%
    white-space: nowrap
    overflow: auto
    overflow-y: hidden
    & > tr 
      display: block
      & > th 
        text-align: left

  & > tfoot
    width: 100%
    & > tr > th
      padding: 0

  & > tbody 
    display: block
    width: auto
    position: relative
    overflow-x: auto
    white-space: nowrap
    & > tr 
      display: inline-block
      vertical-align: top
   
  /* sort out borders */

  & > thead, & > tbody, & > tfoot
    & > tr > th, & > tr > td
      border-left: 0
      border-right: 0
      border-bottom: 0

  & > tbody > tr 
    border-left: 1px solid $subtle_border


table > tbody:empty
  &:before
    content: "Empty table"
    width: 100%
    text-align: center
    display: inline-block
    +subtle_color
  ~ tfoot
    display: none
