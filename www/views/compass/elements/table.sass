@import "layout/reveal"

$triglecolor: rgba(0,0,0,0.15)
$margin_table_actions: 7px
$padding_table: rhythm(0.5) 0.5em

$table_color: $subtle-background
$color_table_border: $subtle-border

=css-triangle($a,$b,$c)

=rbbt_table()
  +normal
  min-width: span(1 of 3)
  max-width: 100%

  caption
    text-align: left
    span
      +normal
      +subtle_color

  background-color: lighten($table_color, 20)
  +rhythm-borders(1,1,1,1)
  padding: $padding_table
  border-collapse: collapse

  //tr:first-child
    th
      border-bottom: 1px solid $color_table_border
  tbody, thead
    td, th
      margin: 0
      padding: rhythm(0.5)
      text-align: left
 
  td, th
    vertical-align: center
    a
      white-space: nowrap

  tr:nth-child(2n)
    background-color: lighten($table_color, 10)
 
  th
    background-color: $table_color
    +noselect

  &.wide
    td
      max-width: 200px
      overflow: hidden
      text-overflow: ellipsis

  tfoot
    th
      background-color: lighten($table_color, 5)
    ul.table_actions li
      margin-left: $margin_table_actions
    ul.table_pagination, ul.table_actions
      +clean_list
      +flat_list
      +button_set
      display: flex
      li > .button, li.button, li
        min-width: 3em
        text-align: center
        //+set_item_height(rhythm(1))
        //vertical-align: top
      float: left
      margin-right: 1em

    ul.table_actions
      @media print
        &
          display: none

    
  &.sorted
    thead
      tr
        th
          position: relative
          &, &:hover
            +down_cursor
            &.headerSortDown
              +up_cursor

          &.headerSortDown, &.headerSortUp
            +bold

          &.headerSortUp:after, &.headerSortDown:after
            content: " "
            float: right
            right: 0
 
          &.headerSortDown:after
            margin-top: 5px
            @include css-triangle(5px, $triglecolor, top)

          &.headerSortUp:after
            margin-bottom: 5px
            @include css-triangle(5px, $triglecolor, bottom)

=table_column_selector
  li
    @include grid-row()

    span
      @include ellipsis_text()
      @include grid-column(8)
    a
      @include grid-column(2, $last-column:false)

=responsive_table()
  caption
    display: block
  display: block
  position: relative
  width: 100%
  border-collapse: collapse
  border-spacing: 0
  th, td 
    margin: 0
    vertical-align: top
    height: 3em

  th 
    text-align: left

  thead 
    display: block
    float: left
    max-width: 40%
    white-space: nowrap
    overflow: auto
    overflow-y: hidden

  tfoot
    width: 100%

  tbody 
    display: block
    width: auto
    position: relative
    overflow-x: auto
    white-space: nowrap
   

  thead tr 
    display: block
   

  th 
    display: block
    text-align: right
   

  tbody tr 
    display: inline-block
    vertical-align: top
   

  td 
    display: block
    min-height: 1.25em
    text-align: left
 
  /* sort out borders */

  th 
    border-bottom: 0
    border-left: 0
   

  td 
    border-left: 0
    border-right: 0
    border-bottom: 0
   

  tbody tr 
    border-left: 1px solid $subtle_border
   

  th:last-child, td:last-child 
  tfoot > tr > th
    padding: 0

  //tfoot
    border: 2px solid $subtle_border
    border-top: 1px solid $subtle_border
     

